# Built in Rules
requires:
  PSRule: '@pre >=2.8.1'
  PSRule.Rules.Azure: '@pre >=1.26.1'

include:
  module:
    # Import all the Azure Well-Architected Framework rules
    - PSRule.Rules.Azure
    
configuration:
  # Enable code analysis of bicep files
  AZURE_BICEP_FILE_EXPANSION: true
  # Validate that the bicep CLI is used
  AZURE_BICEP_CHECK_TOOL: true
  AZURE_BICEP_PARAMS_FILE_EXPANSION: true
  AZURE_PARAMETER_FILE_EXPANSION: true

input:
  pathIgnore:
    - '*.yml'
    - '*.md'
    - 'bicepconfig.json'
    - 'metadata.json'

#    #Include test files from modules
    - '!**/*.bicep' 
    - "!**/.bicepparam"

#execution:
  # Disable warnings that files cannot be processed
  #notProcessedWarning: false

output:
  as: Summary
  #culture: [ 'en-US' ]
  # Show results for rules with the Fail, Pass, or Error outcome
  #outcome: 'Processed'